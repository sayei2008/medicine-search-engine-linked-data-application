<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Drughoo! your drug search destination</title>
    <link rel="icon" href="nav.png">

    <!-- Bootstrap -->
    <link href="css/styles.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  
  <body data-spy="scroll" data-target="#navbar" bgcolor = "#FFA07A">
    <nav id="navbar" class="navbar navbar-default navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle Navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">
    <img src="nav.png" width="30" height="30" class="d-inline-block align-top" alt="">
        
      </a>
        </div>

        <!-- .navbar-header -->
        
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <!-- <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li> -->
            <li><a href="index.html">Drughoo!</a></li>
            <li><a href="about.html">About the project</a></li>
            <li><a href="developers.html">About the developers</a></li>
            <li><a href="video.html">Video Demo</a></li>
            <li><a href="#"></a></li>
            <li><a href="#"></a></li>
            <li><a href="#"></a></li>
          </ul>
      </div>
      <!-- .collapse.navbar-collapse -->
        </div>
        <!-- .container-fluid -->
    </nav>
        <div class="jumbotron">
          <div class="wrap">
        
        <!-- /.wrap -->
        
          <h2 style="color:#010EC7" class="text-center"><strong>Drughoo!<strong></h2>
          <h6 style="color:#0A0A0A" class="text-center">your drug search destination</h6><br>
          <h5 style="color:#0A0A0A" class="text-center">A Free and open data initiative</h5>
          <h5 style="color:#0A0A0A" class="text-center">Powered by DB-Pedia</h5>
          <h4 style="color:#0A0A0A" class="text-center">Get going by making your first search now</h4><br>
          

          
          

          
          <div class="three-columns">
            <div class="grid-item">
            
            </div> 
          <!-- /.grid-item -->
          
            <div class="grid-item">
                
              
                <center><img src="nav.png" class="img-circle" alt="Drughoo!" width="50" height="50"><center>
                <input type="text" class="form-control" id="userInput" type="text"  placeholder="Search">
                  <br>
                  <span class="input-group-btn">

                    <center><button class="btn btn-default" type="button" onclick="myFunction()">Go!</button><center>
                      <p id="demo"></p>
                  </span>

            </div>
          
          <!-- /.grid-item -->

          <div class="grid-item">
            
          </div> 
          <!-- /.grid-item -->
           

        </div>
       <!-- /.two-columns  -->



       


       <br><br><br><br>
       <center>
       <div class="input-group">
        <div class="input-group-prepend">
        </div>
            <textarea  style="display: none;" class="form-control" aria-label="With textarea"  placeholder="Result Display" id = "drugresult" style="margin: 0px; width: 915px; height: 248px;"></textarea>
      </div>
    </center>
  


          </div>
       
      
        </div>
        <!-- ./wrap -->
      
    
    </div>  
    <!--/. jumbotron -->


   
    


  
			
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bower_components/bootstrap-sass/assets/javascripts/bootstrap.min.js"></script>

    <script>
function myFunction() {
  
  document.getElementById("drugresult").style.display = "block";
  document.getElementById("drugresult").style = "margin: 0px; width: 915px; height: 248px;"
  var drug = document.getElementById("userInput").value;
//var drug = 'Penicillin' or 'Vicodin' or 'Morphene' or 
//var XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest;
var xhr = new XMLHttpRequest();
const Http = new XMLHttpRequest();

const url='https://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=PREFIX%20dbo%3A%20%3Chttp%3A%2F%2Fdbpedia.org%2Fontology%2F%3E%20%0D%0A%0D%0APREFIX%20dbp%3A%20%3Chttp%3A%2F%2Fdbpedia.org%2Fproperty%2F%3E%20%0D%0A%0D%0Aprefix%20resource%3A%20%3Chttp%3A%2F%2Fdbpedia.org%2Fresource%2F%3E%20%0D%0A%0D%0ASELECT%20*%20%20%0D%0A%0D%0AWHERE%20%7B%20%0D%0A%0D%0A%3Fresource%20dbo%3Aabstract%20%3Fabstract%20%23%20get%20all%20subjects%20with%20an%20abstract%20%0D%0A%0D%0AOPTIONAL%20%7B%20%3Fresource%20dbp%3AlegalStatus%20%3Fstatus%20%7D%20%23%20get%20legalStatus%20if%20available%20%0D%0A%0D%0AOPTIONAL%20%7B%20%3Fresource%20dbo%3Athumbnail%20%3Fthumbnail%20%7D%20%23%20get%20thumbnail%20if%20available%20%0D%0A%0D%0AFILTER(regex(str(%3Fresource)%2C%22' + drug + '%24%22%2C%22i%22))%20%23%20get%20resource%20that%20ends%20with%20drug%20name%20%0D%0A%0D%0AFILTER%20langMatches(lang(%3Fabstract)%2C%27en%27)%20%23%20filter%20for%20english%20descriptions%20only%20%0D%0A%0D%0A%7D%20%0D%0A%0D%0ALIMIT%2020%20%23%20limit%20to%2020%20results&format=application%2Fsparql-results%2Bjson&CXML_redir_for_subjs=121&CXML_redir_for_hrefs=&timeout=30000&debug=on&run=%20Run%20Query%20&fbclid=IwAR2Rm9uQbliKGmjSVlq_x_WfCvjpiYHXG_YIiyZbEMtsNJnru99poItiPpU';

Http.open("GET", url);
Http.send();

Http.onreadystatechange=(e)=>{
//console.log(Http.responseText)
var drug_info = Http.responseText;
//var obj = JSON.parse(drug_info)
//console.log(typeof drug_info)
var resultJson = JSON.parse(drug_info);
var drug_text = resultJson.results.bindings[0].abstract.value;
document.getElementById("drugresult").value = drug_text;
//document.getElementById("demo").innerHTML = drug_text;



}



}
</script>



    
</body>
</html>